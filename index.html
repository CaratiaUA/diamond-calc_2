
<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥—ñ–∞–º–∞–Ω—Ç—ñ–≤ Caratia</title>
  <style>
    table { width: 100%; border-collapse: collapse; margin-bottom: 30px; font-family: sans-serif; font-size: 14px; }
    th, td { border: 1px solid #ccc; padding: 6px; text-align: center; }
    input[type="number"] { width: 60px; }
    tfoot td { font-weight: bold; background-color: #f0f0f0; }
    .send-button { padding: 10px 20px; font-size: 16px; margin-top: 20px; }
  </style>
</head>
<body>

<h2>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∏—Ö –¥—ñ–∞–º–∞–Ω—Ç—ñ–≤</h2>

<table id="diamond-table">
  <thead>
    <tr>
      <th>–†–æ–∑–º—ñ—Ä</th>
      <th>–¶—ñ–Ω–∞ ($)</th>
      <th>Ct</th>
      <th>CERTIFICATE</th>
      <th>–°—É–º–∞ ($)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0.70 ct</td>
      <td><span class="price">2600</span></td>
      <td><input type="number" step="0.1" value="0"></td>
      <td>
        <select>
          <option value="0">–±–µ–∑ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç—É</option>
          <option value="30">IGI / GIA +30$</option>
        </select>
      </td>
      <td class="row-sum">0</td>
    </tr>
    <tr>
      <td>0.85 ct</td>
      <td><span class="price">2900</span></td>
      <td><input type="number" step="0.1" value="0"></td>
      <td>
        <select>
          <option value="0">–±–µ–∑ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç—É</option>
          <option value="30">IGI / GIA +30$</option>
        </select>
      </td>
      <td class="row-sum">0</td>
    </tr>
  </tbody>
  <tfoot>
    <tr>
      <td colspan="4">–†–∞–∑–æ–º</td>
      <td id="total">0</td>
    </tr>
  </tfoot>
</table>

<button class="send-button" onclick="sendOrder()">–ù–∞–¥—ñ—Å–ª–∞—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</button>

<script>
function recalc() {
  let total = 0;
  document.querySelectorAll("#diamond-table tbody tr").forEach(row => {
    const price = parseFloat(row.querySelector(".price").textContent);
    const weight = parseFloat(row.querySelector("input").value) || 0;
    const cert = parseFloat(row.querySelector("select").value);
    const rowSum = price * weight + (weight > 0 ? cert : 0);
    row.querySelector(".row-sum").textContent = rowSum.toFixed(2);
    total += rowSum;
  });
  document.getElementById("total").textContent = total.toFixed(2);
}

document.querySelectorAll("input, select").forEach(el => el.addEventListener("input", recalc));

function sendOrder() {
  let msg = "üõí *–ù–æ–≤–µ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è:*

";
  document.querySelectorAll("#diamond-table tbody tr").forEach(row => {
    const size = row.cells[0].textContent;
    const price = row.querySelector(".price").textContent;
    const weight = row.querySelector("input").value;
    const certText = row.querySelector("select").selectedOptions[0].text;
    const sum = row.querySelector(".row-sum").textContent;
    if (parseFloat(weight) > 0) {
      msg += `üíé *${size}* ‚Äî ${weight} ct √ó ${price} + ${certText} = *${sum}$*
`;
    }
  });
  msg += `
üî¢ *–°—É–º–∞ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è:* $${document.getElementById("total").textContent}`;

  fetch("https://api.telegram.org/bot7653937330:AAFHbCIy9cwS91nc_CHqucm882A6nOYhe8U/sendMessage", {
    method: "POST",
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      chat_id: "7653937330",
      text: msg,
      parse_mode: "Markdown"
    })
  }).then(() => alert("–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è –Ω–∞–¥—ñ—Å–ª–∞–Ω–æ!"));
}
</script>

</body>
</html>
